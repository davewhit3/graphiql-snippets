import {
  require_show_hint
} from "./chunk-NYSIHVH6.js";
import {
  require_codemirror
} from "./chunk-677FCL5L.js";
import {
  Position,
  getAutocompleteSuggestions
} from "./chunk-OASP4XPL.js";
import "./chunk-LKNORULI.js";
import {
  __toESM
} from "./chunk-V4OQ3NZ2.js";

// node_modules/.pnpm/codemirror-graphql@2.2.1_@codemirror+language@6.0.0_codemirror@5.65.19_graphql@16.11.0/node_modules/codemirror-graphql/esm/hint.js
var import_codemirror = __toESM(require_codemirror());
var import_show_hint = __toESM(require_show_hint());
import_codemirror.default.registerHelper("hint", "graphql", (editor, options) => {
  const { schema, externalFragments, autocompleteOptions } = options;
  if (!schema) {
    return;
  }
  const cur = editor.getCursor();
  const token = editor.getTokenAt(cur);
  const tokenStart = token.type !== null && /"|\w/.test(token.string[0]) ? token.start : token.end;
  const position = new Position(cur.line, tokenStart);
  const rawResults = getAutocompleteSuggestions(schema, editor.getValue(), position, token, externalFragments, autocompleteOptions);
  const results = {
    list: rawResults.map((item) => {
      var _a;
      return {
        text: (_a = item === null || item === void 0 ? void 0 : item.rawInsert) !== null && _a !== void 0 ? _a : item.label,
        type: item.type,
        description: item.documentation,
        isDeprecated: item.isDeprecated,
        deprecationReason: item.deprecationReason
      };
    }),
    from: { line: cur.line, ch: tokenStart },
    to: { line: cur.line, ch: token.end }
  };
  if ((results === null || results === void 0 ? void 0 : results.list) && results.list.length > 0) {
    results.from = import_codemirror.default.Pos(results.from.line, results.from.ch);
    results.to = import_codemirror.default.Pos(results.to.line, results.to.ch);
    import_codemirror.default.signal(editor, "hasCompletion", editor, results, token);
  }
  return results;
});
//# sourceMappingURL=hint-KSNNMJFX.js.map
